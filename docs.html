<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">

        <title>stylecow</title>

        <link rel="stylesheet" type="text/css" href="css/styles.min.css">
        <link rel="stylesheet" type="text/css" href="js/highlight/styles/github.css">
        <script type="text/javascript" src="js/highlight/highlight.pack.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
    </head>

    <body>
        <main>
            <header class="content-header">
                <h1>Documentation</h1>

                <p>How stylecow parse the code</p>
            </header>

            <nav class="page-navigation">
                <ul class="nav">
                    <li><a href="index.html#quick-start">Quick start</a></li>
                    <li><a href="index.html#cli">Cli</a></li>
                    <li><a href="index.html#grunt">Grunt</a></li>
                    <li><a href="index.html#plugins">Plugins</a></li>
                    <li><a class="selected" href="docs.html">Docs</a></li>
                    <li><a href="api.html">API</a></li>
                </ul>
            </nav>

            <div class="page-content">
                <h2>CSS parser</h2>

                <p>The stylecow parser converts a string with css code in an object oriented structure. Each object represents a css element (a rule, a declaration, a value, a selector, etc). Let's take, for example, the following code:</p>

<pre><code>html, body {
    font-family: Arial, Helvetica;
    color: black;
    margin: 10px 20px;
}
</code></pre>
                <p>The object oriented representation is something like:</p>
<pre><code>[Object Root] [
  [Object Rule] [
     [Object Selector] [
        [Object Keyword name="html"]
     ],
     [Object Selector] [
        [Object Keyword name="body"]
     ],
     [Object Declaration name="font-family"] [
        [Object Value] [
           [Object Keyword name="Arial"]
        ],
        [Object Value] [
           [Object Keyword name="Helvetica"]
        ]
     ]
     [Object Declaration name="color"] [
        [Object Value] [
           [Object Keyword name="black"]
        ]
     ],
     [Object Declaration name="margin"] [
        [Object Value] [
           [Object Keyword name="10px"],
           [Object Keyword name="20px"]
        ]
     ]
  ]
]
</code></pre>
                <p>Because all objects extend the Array.prototype you can iterate with the objects in the following way:</p>

<pre><code>var stylecow = require('stylecow');
var code = stylecow.parseFile('styles.css');

console.log(code);             //[Object Root]
console.log(code[0]);          //[Object Rule]
console.log(code[0][0]);       //[Object Selector]
console.log(code[0][1]);       //[Object Selector]
console.log(code[0][2]);       //[Object Declaration name="font-family"]
console.log(code[0][2][0]);    //[Object Value]
console.log(code[0][2][0][0]); //[Object Keyword name="Arial"]


// you can use all Array.prototype methods
// to iterate with the code (forEach, some, every, filter, etc)

//Iterate through all childrens of the root
code.forEach(function (child) {
    console.log(child.type);
});

//Check if the first rule has any selector
var hasSelector = code[0].some(function (child) {
    return child.type === 'Selector';
});
</code></pre>
                
                <p>All objects can be converted to css code easily, using the method <code>.toString()</code></p>

<pre><code>//Stringify the code
console.log(code.toString());

/*
html, body {
    font-family: Arial, Helvetica;
    color: black;
    margin: 10px 20px;
}
*/

//Stringify just some part of the code:
var declaration = code[0][2];

console.log(declaration.toString());
// font-family: Arial, Helvetica;

//toString() is called automatically on use the object as a string:

console.log('Declaration -> ' + declaration);
// Declaration -> font-family: Arial, Helvetica;
</code></pre>

                <p>There are several types of objects available, some with extra properties, such "name" or "value". In the future, the number of objects can increase for more specify, but for now, the available types are:</p>

                <table>
                    <tr>
                        <th>Argument</th>
                        <td>
                            <p>To store a function argument. For example the function <code>rgb(12, 34, 56)</code> has three arguments</p>
                        </td>
                    </tr>
                    <tr>
                        <th>AtRule</th>
                        <td>
                            <p>Stores an at-rule. For example <code>@import</code>, <code>@charset</code></p>

                            <ul>
                                <li><strong>name:</strong> Returns the rule name (omiting "@").</li>
                            </ul>
                        </td>
                    </tr>
                    <tr>
                        <th>Comment</th>
                        <td>
                            <p>Contains a css comment.</p>

                            <ul>
                                <li><strong>name:</strong> Returns the comment text.</li>
                            </ul>
                        </td>
                    </tr>
                    <tr>
                        <th>Condition</th>
                        <td>
                            <p>Contains css conditions (media queries, support conditions, etc).</p>

                            <ul>
                                <li><strong>name:</strong> Returns the condition content.</li>
                            </ul>
                        </td>
                    </tr>
                    <tr>
                        <th>Declaration</th>
                        <td>
                            <p>To store a css declaration.</p>

                            <ul>
                                <li><strong>name:</strong> Returns the declaration name.</li>
                                <li><strong>value:</strong> Returns the declaration value as a string</li>
                            </ul>
                        </td>
                    </tr>
                    <tr>
                        <th>Function</th>
                        <td>
                            <p>Contains a css function.</p>

                            <ul>
                                <li><strong>name:</strong> Returns the function name.</li>
                                <li><strong>value:</strong> Returns the function arguments as a string</li>
                            </ul>
                        </td>
                    </tr>
                    <tr>
                        <th>Keyword</th>
                        <td>
                            <p>Used to store arbitrary values.</p>

                            <ul>
                                <li><strong>name:</strong> Returns the keyword content.</li>
                            </ul>
                        </td>
                    </tr>
                    <tr>
                        <th>NestedAtRule</th>
                        <td>
                            <p>Represents an at-rule that content nested rules (for example <code>@media</code>, <code>@font-face</code>, etc).</p>

                            <ul>
                                <li><strong>name:</strong> Returns the nested-rule name (omiting the "@").</li>
                            </ul>
                        </td>
                    </tr>
                    <tr>
                        <th>Root</th>
                        <td>
                            <p>Object that content the whole css code</p>
                        </td>
                    </tr>
                    <tr>
                        <th>Rule</th>
                        <td>
                            <p>Represents a css rule.</p>
                        </td>
                    </tr>
                    <tr>
                        <th>Selector</th>
                        <td>
                            <p>Represents a css selector.</p>
                        </td>
                    </tr>
                    <tr>
                        <th>Value</th>
                        <td>
                            <p>Represents a value of a declaration.</p>
                        </td>
                    </tr>
                </table>

                <h2>Create your custom tasks</h2>

                <p>In addition to the plugins, you can create your own custom tasks to convert the css code as you want. A task is a function executed for each css element found in the code (a rule, a declaration, etc). Let's see an example:</p>

<pre><code>.foo {
    colour: red;
}
</code></pre>

<pre><code>
var stylecow = require('stylecow');

stylecow.addTask({
    Declaration: {
        colour: function (declaration) {
            declaration.name = "color";
        }
    }
});

//Execute the task
var code = stylecow.convertFile('styles.css');

console.log(code.toString());
/*
.foo {
    color: red;
}
*/
</code></pre>

                <p>In this task, we defined a function that is executed for each object of type "Declaration" named "colour" and changes the name to "color".</p>
                <p>To know how to create your own tasks to manipulate the css as you like, <a href="api.html">you can read the documentation</a></p>
            </div>
        </main>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-110819-21', 'auto');
  ga('send', 'pageview');
</script>
    </body>
</html>
