<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">

        <title>stylecow</title>

        <link rel="stylesheet" type="text/css" href="css/styles.min.css">
        <link rel="stylesheet" type="text/css" href="js/highlight/styles/github.css">
        <script type="text/javascript" src="js/highlight/highlight.pack.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
    </head>

    <body>
        <main>
            <header class="content-header">
                <h1>The API</h1>
                <p>The common function available in all css elements</p>
            </header>

            <nav class="page-navigation">
                <ul class="nav">
                    <li><a href="index.html#quick-start">Quick start</a></li>
                    <li><a href="index.html#cli">Cli</a></li>
                    <li><a href="index.html#grunt">Grunt</a></li>
                    <li><a href="index.html#plugins">Plugins</a></li>
                    <li><a href="docs.html">Docs</a></li>
                    <li><a class="selected" href="api.html">API</a></li>
                </ul>
            </nav>

            <div class="page-menu">
                <nav>
                    <strong>Traversing:</strong>
                    <ul>
                        <li><a href="#api-is">.is()</a></li>
                        <li><a href="#api-children">.children()</a></li>
                        <li><a href="#api-firstChild">.firstChild()</a></li>
                        <li><a href="#api-haschild">.hasChild()</a></li>
                        <li><a href="#api-search">.search()</a></li>
                        <li><a href="#api-searchfirst">.searchFirst()</a></li>
                        <li><a href="#api-has">.has()</a></li>
                        <li><a href="#api-next">.next() | .prev()</a></li>
                        <li><a href="#api-parent">.parent()</a></li>
                    </ul>
                </nav>


                <nav>
                    <strong>Manipulation:</strong>
                    <ul>
                        <li><a href="#api-clone">.clone()</a></li>
                        <li><a href="#api-clonebefore">.cloneBefore() | .cloneAfter()</a></li>
                        <li><a href="#api-add">.add()</a></li>
                        <li><a href="#api-insertbefore">.before() | .after()</a></li>
                        <li><a href="#api-replacewith">.replaceWith()</a></li>
                        <li><a href="#api-remove">.remove()</a></li>
                        <li><a href="#api-empty">.empty()</a></li>
                        <li><a href="#api-getcontent">.getContent() | .setContent()</a></li>
                    </ul>
                </nav>


                <nav>
                    <strong>Miscelaneous:</strong>
                    <ul>
                        <li><a href="#api-setvalue">.setValue() | .getValue()</a></li>
                        <li><a href="#api-getdata">.setData() | .getData()</a></li>
                        <li><a href="#api-index">.index()</a></li>
                    </ul>
                </nav>
            </div>

            <div class="page-content">
                <h3 id="api-is">.is()</h3>

                <p>Check whether the element matches with the provided conditions. The conditions are defined in an object with the following properties:</p>

                <ul>
                    <li><strong>type:</strong> to test the element type (Rule, Declaration, Function, etc)</li>
                    <li><strong>name:</strong> to test the element name (some elements like Rule or Selector has not name)</li>
                    <li><strong>vendor:</strong> to test the element vendor prefix</li>
                </ul>

                <p>Usage example:</p>

<pre><code>body {
    border-radius: 3px;
    font-size: 1em;
    border-color: rgba(2, 34, 255, 0.5);
    border-radius: 4px;
}   
</code></pre>

<pre><code>//Parse the code:
var code = require('stylecow').parseFile('styles.css');

//Get the first rule:
var rule = code[0];

//Check the declarations named "border-radius" in the rule
rule.forEach(function (declaration) {
    console.log(declaration.is({
        type: 'Declaration',
        name: 'border-radius'
    }));
});

/*
true
false
false
true
*/

//Use arrays to search between various values:
rule.forEach(function (declaration) {
    console.log(declaration.is({
        type: 'Declaration',
        name: ['border-radius', 'font-size']
    }));
});

/*
true
true
false
true
*/

//Or even a regular expression:
rule.forEach(function (declaration) {
    console.log(declaration.is({
        type: 'Declaration',
        name: /^border-/
    }));
});

/*
true
false
true
true
*/

</code></pre>

                <h3 id="api-children">.children()</h3>

                <p>Returns the direct children of an object. You can provide a filter to return only the children matching with some conditions.</p>

<pre><code>body {
    color: blue;
}

@media (min-width: 200px) {
    body {
        color: red;
    }
}
@font-face {
    font-family: 'myFont';
    src: url(myfont.woff);
}
</code></pre>

<pre><code>//Parse the code:
var code = require('stylecow').parseFile('styles.css');

//Get all children:
var result = code.children();

console.log(result.length); //3

//Get only the objects of type "NestedAtRule"
var result = code.children({
    type: 'NestedAtRule'
});

console.log(result.length); //2

//Get only the @media objects:
var result = code.children({
    type: 'NestedAtRule',
    name: 'media'
});

console.log(result.length); //1
</code></pre>

                <h3 id="api-firstChild">.firstChild()</h3>

                <p>It's like <code>.children()</code> but returns the first result found instead an array with all objects, and of course, you can provide a filter.</p>

                <h3 id="api-haschild">.hasChild()</h3>

                <p>Returns <code>true</code> if the object has at least one child matching with the filter. For example:</p>

<pre><code>body {
    border-radius: 3px;
    font-size: 1em;
}   
</code></pre>          

<pre><code>//Parse the code and get the first rule
var code = require('stylecow').parseFile('styles.css');
var rule = code.firstChild({type: 'Rule'});

//Check if the rule has a "border-radius" statement
rule.hasChild({type: 'Declaration', name: 'border-radius'}); //true

//Check if the rule has a "color" statement
rule.hasChild({type: 'Declaration', name: 'color'}); //false

</code></pre>

                <h3 id="api-search">.search()</h3>

                <p>It's like <code>.children()</code> but search recursively in cascade and returns an array with all results found.</p>

<pre><code>body {
    color: blue;
}
p {
    border-radius: 3px solid blue;
    background: linear-gradient(blue, red);
}
</code></pre>

<pre><code>//Parse the code
var code = require('stylecow').parseFile('styles.css');

//Search all keywords named "blue" and change to "green":
code.search({
    type: 'Keyword',
    name: 'blue'
}).forEach(function (keyword) {
    keyword.name = 'green';
});

//Get the result code:
console.log(code.toString());
/*
body {
    color: green;
}
p {
    border-radius: 3px solid green;
    background: linear-gradient(green, red);
}
*/
</code></pre>

                <h3 id="api-searchfirst">.searchFirst()</h3>

                <p>It's like <code>.search()</code> but returns the first element found.</p>

                <h3 id="api-has">.has()</h3>

                <p>Returns <code>true</code> if the object has at least one element matching with the filter. It's like <code>.hasChild()</code> but search recursively in all descendents</p>

                <h3 id="api-next">.prev() | .next()</h3>

                <p>Returns the inmediate following or preceding sibling of the element. For example:</p>

<pre><code>body {
    color: blue;
    font-family: Arial;
    border: solid 1px red;
}
</code></pre>

<pre><code>//Parse the code
var code = require('stylecow').parseFile('styles.css');

//Search the font-family declaration:
var declaration = code.searchFirst({
    type: 'Declaration',
    name: 'font-family'
});

//Get the next sibling
var next = declaration.next();

console.log(next.toString()); // "border: solid 1px red"

//Get the previous sibling
var prev = declaration.prev();

console.log(prev.toString()); // "color: blue"
</code></pre>

                <h3 id="api-parent">.parent()</h3>

                <p>Returns the parent element. This function accepts a filter to return the first parent matching. For example:</p>

<pre><code>body {
    border: solid 1px red;
}
</code></pre>

<pre><code>//Parse the code
var code = require('stylecow').parseFile('styles.css');

//Search the "red" keyword:
var red = code.searchFirst({
    type: 'Keyword',
    name: 'red'
});

//Get the inmediate parent:
console.log(red.parent()); // [Object Value]

//Get the declaration parent:
console.log(red.parent({type: 'Declaration'})); // [Object Declaration]

//Get the declaration parent:
console.log(red.parent({type: 'Rule'})); // [Object Rule]
</code></pre>

                <h3 id="api-clone">.clone()</h3>

                <p>Creates a deep clone of the object (with all children)</p>

<pre><code>body {
    border-radius: 1px;
}
</code></pre>

<pre><code>//Parse the code
var code = require('stylecow').parseFile('styles.css');

//Get the border-radius declaration:
var declaration = code.searchFirst({type: 'Declaration', name: 'border-radius'});

//Clone the declaration
var cloned = declaration.clone();
cloned.name = '-moz-border-radius';

console.log(declaration.toString()); // border-radius: 1px;
console.log(cloned.toString()); // -moz-border-radius: 1px;
</code></pre>

                <h3 id="api-clone">.cloneBefore() | .cloneAfter()</h3>

                <p>Creates a deep clone of the object and insert as a sibling after or before the object.</p>

<pre><code>body {
    border-radius: 1px;
}
</code></pre>

<pre><code>//Parse the code
var code = require('stylecow').parseFile('styles.css');

//Get the border-radius declaration:
var declaration = code.searchFirst({type: 'Declaration', name: 'border-radius'});

//Clone the declaration, insert before and change the name:
declaration.cloneBefore().name = '-moz-border-radius';

console.log(code.toString());

/*
body {
    -moz-border-radius: 1px;
    border-radius: 1px;
}
*/

//Clone the declaration, insert after and change the name:
declaration.cloneAfter().name = '-webkit-border-radius';

console.log(code.toString());

/*
body {
    -moz-border-radius: 1px;
    border-radius: 1px;
    -webkit-border-radius: 1px;
}
*/
</code></pre>

                <h3 id="api-add">.add()</h3>

                <p>Adds new childrens to the object. The children can be css code or instances of css elements. You can specify the position of the new objects. This function returns the element added.</p>

<pre><code>//Creates a new rule
var rule = new stylecow.Rule();

//Creates a css selector
var selector = new stylecow.Selector();

//Adds a keyword to the selector
selector.add(new stylecow.Keyword('body'));

//Add the selector to the rule
rule.add(selector);

console.log(rule.toString());
/*
body {
}
*/

//Adds a declaration as string
rule.add('color: blue');

console.log(rule.toString());
/*
body {
    color: blue;
}
*/

//Add a new declaration in the position "1"
rule.add('font-family: Arial', 1);

console.log(rule.toString());
/*
body {
    font-family: Arial;
    color: blue;
}
*/

//Add a new declaration as object
var declaration = rule.add(new stylecow.Declaration('border-radius'));

//Add a value to the declaration
var value = declaration.add(new stylecow.Value());

//Add a keyword to this value
value.add(new stylecow.Keyword('6px'));

console.log(rule.toString());
/*
body {
    font-family: Arial;
    color: blue;
    border-radius: 6px;
}
*/

//Or use the chaining to do the same in one line:
rule.add(new stylecow.Declaration('font-size')).add(new stylecow.Value).add(new stylecow.Keyword('2em'));

console.log(rule.toString());
/*
body {
    font-family: Arial;
    color: blue;
    border-radius: 6px;
    font-size: 2em;
}
*/
</code></pre>

                <h3 id="api-before">.before() | .after()</h3>

                <p>Adds new children as siblings after or before the object. As <code>.add().</code>, the children can be defined as string or instances of css elements, and returns the element added.</p>

<pre><code>body {
    border-radius: 1px;
}
</code></pre>

<pre><code>//Parse the code
var code = require('stylecow').parseFile('styles.css');

//Get the border-radius declaration:
var declaration = code.searchFirst({type: 'Declaration', name: 'border-radius'});

//Insert a new element before:
declaration.before(new stylecow.Declaration('color')).add(new stylecow.Value()).add(new stylecow.Keyword('blue'));

console.log(code.toString());
/*
body {
    color: blue;
    border-radius: 1px;
}
*/

//Insert a new element using a string:
declaration.before('font-size: 12px');

console.log(code.toString());
/*
body {
    color: blue:
    font-size: 12px;
    border-radius: 1px;
}
*/

//Insert a new element after
declaration.after('background: gray');

console.log(code.toString());
/*
body {
    color: blue:
    font-size: 12px;
    border-radius: 1px;
    background: gray;
}
*/
</code></pre>

                <h3 id="api-replacewith">.replaceWith()</h3>

                <p>Replaces the current object with a new one. As <code>.add()</code>, <code>.before()</code> or <code>.after()</code>, the new element can be an instance or a string and returns the inserted element:</p>

<pre><code>body {
    font-size: 1em;
    color: blue;
}
</code></pre>

<pre><code>//Parse the code
var code = require('stylecow').parseFile('styles.css');

//Get the color declaration:
var declaration = code.searchFirst({type: 'Declaration', name: 'color'});

//Replace the declaration by other, using a string:
declaration.replaceWith('background: red');

console.log(code.toString());
/*
body {
    font-size: 1em;
    background: red;
}
*/
</code></pre>

                <h3 id="api-remove">.remove()</h3>

                <p>Removes the element from its parent.</p>

<pre><code>body {
    font-size: 1em;
    color: blue;
}
</code></pre>

<pre><code>//Parse the code
var code = require('stylecow').parseFile('styles.css');

//Get the color declaration:
var declaration = code.searchFirst({type: 'Declaration', name: 'color'});

//Remove it from the rule
declaration.remove();

console.log(code.toString());
/*
body {
    font-size: 1em;
}
*/
</code></pre>

                <h3 id="api-empty">.empty()</h3>

                <p>Removes all children of the element.</p>

<pre><code>body {
    font-size: 1em;
    color: blue;
}
</code></pre>

<pre><code>//Parse the code
var code = require('stylecow').parseFile('styles.css');

//Empty the rule
code.searchFirst({type: 'Rule'}).empty();

console.log(code.toString());
/*
body {
}
*/
</code></pre>

                <h3 id="api-getcontent">.getContent() | .setContent()</h3>

                <p><code>.getContent()</code> returns an array with all children of the element as a string. Use <code>.setContent()</code> to set new children using a string or an array of strings.</p>

<pre><code>body {
    background: rgba(100, 150, 200, 0.5);
}
</code></pre>

<pre><code>//Parse the code
var code = require('stylecow').parseFile('styles.css');

//Get the rgba function:
var rgba = code.searchFirst({type: 'Function', name: 'rgba'});

console.log(rgba.getContent());
/*
['100', '150', '200', '0.5']
*/


//Set new content using a string:
rgba.setContent('10, 30, 200, 0.5');

console.log(rgba.getContent());
// ['10', '30', '200', '0.5']


//Set new content using an array:
rgba.setContent(['97', '130', '100', '0.75']);

console.log(rgba.getContent());
// ['97', '130', '100', '0.75']

</code></pre>

                <h3 id="api-setvalue">.setData() | .getData()</h3>

                <p>Saves arbitrary data in the element. This data can be recovered in the cascade tree for any of its children.</p>
                <p>The function <code>.getData()</code> returns any value saved. If the element has not the value, it search the value in its parents.</p>

<pre><code class="css">body {
    color: blue;

    p {
        font-family: Arial;

        strong {
            font-weight: bold;
        }
    }
}
</code></pre>

<pre><code>//Parse the code
var code = require('stylecow').parseFile('styles.css');

//Save a value in the root
code.setData('color', 'red');

//Select the font-weight declaration:
var font_weight = code.searchFirst({type: 'Declaration', name: 'font-weight'});

console.log(font_weight.getData('color')); //red
</code></pre>

                <h3 id="api-index">.index()</h3>

                <p>Returns the (zero based) index position of the element in its parent. If the element has not parent, returns <code>-1</code></p>

<pre><code class="css">body {
    color: blue;
    background: red;
}
</code></pre>

<pre><code>//Parse the code
var code = require('stylecow').parseFile('styles.css');

console.log(code.searchFirst({type: 'Declaration', name: 'color'}).index());
// 0

console.log(code.searchFirst({type: 'Declaration', name: 'background'}).index());
// 1
</code></pre>
            </div>
        </main>
    </body>
</html>
